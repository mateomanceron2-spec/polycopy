# Polymarket Copytrade Bot Environment Configuration
# STEP 3: Multi-RPC Provider Setup with Failover

# ===========================================
# RPC PROVIDERS (Polygon Network - Chain ID: 137)
# Priority: Infura (primary) → Polygon Public (secondary) → Alchemy (tertiary)
# ===========================================

# PRIMARY: Infura Polygon endpoint (HTTP + WebSocket)
# Sign up at https://infura.io and create a free account
# Create a new project, select Polygon network
INFURA_PROJECT_ID=532ebec9d5b649beaf397bbc1005f50d
INFURA_RPC_URL=https://polygon-mainnet.infura.io/v3/
INFURA_WS_URL=wss://polygon-mainnet.infura.io/ws/v3/

# SECONDARY: Polygon Public RPC (free, HTTP only)
# No sign-up required, always available as fallback
POLYGON_PUBLIC_RPC_URL=https://polygon-rpc.com

# TERTIARY: Alchemy Polygon endpoint (optional, HTTP + WebSocket)
# Sign up at https://www.alchemy.com for free tier
ALCHEMY_API_KEY=
ALCHEMY_RPC_URL=https://polygon-mainnet.g.alchemy.com/v2/
ALCHEMY_WS_URL=wss://polygon-mainnet.g.alchemy.com/v2/

# LEGACY: QuickNode endpoint (optional, for backwards compatibility)
QUICKNODE_RPC_URL=
QUICKNODE_WS_URL=

# ===========================================
# POLYMARKET CLOB API (for order submission)
# ===========================================
POLYMARKET_WS_URL=wss://ws-subscriptions-clob.polymarket.com/ws/market
POLYMARKET_REST_URL=https://clob.polymarket.com

# API Credentials (OPTIONAL - auto-derived from wallet if not set)
# The bot will automatically derive API credentials from your wallet using L1 auth.
# Only set these manually if you have pre-existing API keys you want to use.
# To generate manually: https://docs.polymarket.com/#authentication
POLYMARKET_API_KEY=
POLYMARKET_API_SECRET=
POLYMARKET_API_PASSPHRASE=

# ===========================================
# WALLET CONFIGURATION
# ===========================================
# Your trading wallet private key (KEEP SECRET!)
PRIVATE_KEY=your_private_key_here

# Wallet address to copytrade (the target trader)
TARGET_WALLET_ADDRESS=0x0000000000000000000000000000000000000000

# ===========================================
# REDIS CONFIGURATION (In-memory caching)
# ===========================================
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# =========================================== 
# MONGODB CONFIGURATION (Persistence)
# ===========================================
MONGODB_URI=mongodb://localhost:27017
MONGODB_DATABASE=polymarket_copytrade

# ===========================================
# TRADING PARAMETERS
# ===========================================
# Maximum position size in USDC
MAX_POSITION_SIZE=1000

# Minimum position size in USDC
MIN_POSITION_SIZE=10

# Copy ratio (0.5 = copy 50% of target's position size)
COPY_RATIO=1.0

# Maximum slippage tolerance (0.02 = 2%)
MAX_SLIPPAGE=0.02

# Gas price multiplier for faster execution (1.2 = 20% above estimated)
GAS_PRICE_MULTIPLIER=1.2

# Maximum gas price in Gwei (to prevent excessive fees)
MAX_GAS_PRICE_GWEI=500

# ===========================================
# WEBSOCKET FAILOVER SETTINGS
# ===========================================
# Base reconnect delay in milliseconds (exponential backoff: 1s, 2s, 4s, 8s...)
WS_RECONNECT_DELAY=1000

# Maximum reconnect delay (cap for exponential backoff)
WS_RECONNECT_MAX_DELAY=30000

# Number of reconnect attempts before switching to HTTP polling
WS_MAX_RECONNECT_ATTEMPTS=3

# WebSocket heartbeat/ping interval (keep connection alive)
WS_HEARTBEAT_INTERVAL=30000

# HTTP polling interval when in fallback mode (1.5 seconds)
HTTP_POLLING_INTERVAL=1500

# Attempts before falling back to HTTP polling
HTTP_FALLBACK_AFTER=3

# Interval to retry WebSocket connection in background when in HTTP mode
WS_BACKGROUND_RECONNECT=60000

# ===========================================
# RPC SETTINGS
# ===========================================
# RPC request timeout in milliseconds
RPC_TIMEOUT=5000

# Maximum RPC retries before failover
RPC_MAX_RETRIES=3

# Nonce cache TTL in seconds
NONCE_CACHE_TTL=30

# ===========================================
# HEALTH MONITORING
# ===========================================
# Health check interval in milliseconds
HEALTH_CHECK_INTERVAL=10000

# No event warning threshold (alert if no events for this duration)
NO_EVENT_WARNING_MS=60000

# No event critical threshold (critical alert)
NO_EVENT_CRITICAL_MS=120000

# Daily uptime percentage threshold (alert if below)
DAILY_UPTIME_THRESHOLD=95

# ===========================================
# ALERTS CONFIGURATION
# ===========================================
# Enable/disable alerts
ALERTS_ENABLED=true

# Webhook URL for alerts (Discord, Slack, etc.)
# Example Discord: https://discord.com/api/webhooks/xxx/yyy
# Example Slack: https://hooks.slack.com/services/xxx/yyy/zzz
ALERT_WEBHOOK_URL=

# Email address for critical alerts (requires email provider integration)
ALERT_EMAIL_TO=

# ===========================================
# LOGGING
# ===========================================
LOG_LEVEL=info

# ===========================================
# DEPLOYMENT
# ===========================================
NODE_ENV=production
